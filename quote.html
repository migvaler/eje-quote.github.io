<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Get a Quote — EJE Pro Painting</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- EmailJS SDK -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

  <meta name="description" content="Request a free quote for painting, tiling, flooring and more." />
</head>
<body class="bg-gray-50 text-gray-800">
  <header class="bg-white shadow">
  <div class="max-w-6xl mx-auto px-6 py-4 flex items-center justify-start gap-12">
    <!-- Logo + Brand -->
    <div class="flex items-center gap-3">
      <!-- Replace with your logo -->
      <img 
        src="images/logo.jpeg" 
        alt="EJE Pro Painting Logo" 
        class="h-24 w-auto object-contain"
      />
      <h1 class="text-4xl font-semibold">EJE Pro Painting</h1>
    </div>

    <!-- Navigation -->
 
  </div>
</header>

  <main class="max-w-3xl mx-auto px-6 py-12">
    <div class="bg-white rounded-lg shadow p-8">
      <h2 class="text-2xl font-bold">Get a Free Quote</h2>
      <p class="mt-2 text-gray-600">Select the services you need, provide a few details, and receive a quote by email.</p>

      <form id="quoteForm" class="mt-6 space-y-4" onsubmit="return false;">
        <fieldset>
          <legend class="text-sm font-semibold">Select services</legend>
          <div class="mt-3 grid gap-2 sm:grid-cols-2">
            <label class="flex items-center gap-3 p-3 border rounded">
              <input type="checkbox" name="service" value="painting" data-price="20" />
              <div>
                <div class="font-medium">Painting</div>
                <div class="text-sm text-gray-500">$20 / m²</div>
              </div>
            </label>

            <label class="flex items-center gap-3 p-3 border rounded">
              <input type="checkbox" name="service" value="tiling" data-price="25" />
              <div>
                <div class="font-medium">Tiling</div>
                <div class="text-sm text-gray-500">$25 / m²</div>
              </div>
            </label>

            <label class="flex items-center gap-3 p-3 border rounded">
              <input type="checkbox" name="service" value="flooring" data-price="30" />
              <div>
                <div class="font-medium">Flooring</div>
                <div class="text-sm text-gray-500">$30 / m²</div>
              </div>
            </label>

            <label class="flex items-center gap-3 p-3 border rounded">
              <input type="checkbox" name="service" value="plumbing" data-price="50" />
              <div>
                <div class="font-medium">Plumbing (repairs)</div>
                <div class="text-sm text-gray-500">$50 fixed / room</div>
              </div>
            </label>
          </div>
        </fieldset>

        <div>
          <label class="block text-sm font-semibold">Approximate Area (m²)</label>
          <input id="area" type="number" min="0" placeholder="e.g. 45" class="mt-1" />
          <p class="text-xs text-gray-500 mt-1">If selecting plumbing only, area is optional.</p>
        </div>

        <div>
          <label class="block text-sm font-semibold">Urgency</label>
          <select id="urgency" class="mt-1">
            <option value="standard" selected>Standard (normal scheduling)</option>
            <option value="urgent">Urgent (+20%)</option>
          </select>
        </div>

        <div class="grid gap-3 sm:grid-cols-2">
          <div>
            <label class="block text-sm font-semibold">Full name</label>
            <input id="name" type="text" placeholder="Jane Doe" required class="mt-1" />
          </div>

        <div>
          <label class="block text-sm font-semibold">Email</label>
          <input id="email" type="email" placeholder="you@email.com" required class="mt-1" />
        </div>
        </div>

        <div>
          <label class="block text-sm font-semibold">Phone (optional)</label>
          <input id="phone" type="tel" placeholder="(555) 555-5555" class="mt-1" />
        </div>

        <div>
          <label class="block text-sm font-semibold">Additional details (optional)</label>
          <textarea id="notes" rows="3" class="mt-1" placeholder="Any details, photos links, materials preference..."></textarea>
        </div>

        <div class="space-y-2">
          <button id="calcBtn" type="button" class="w-full inline-flex justify-center items-center px-4 py-3 bg-blue-600 text-white rounded hover:bg-blue-700" onclick="calculateEstimate()">Calculate Estimate</button>
          <div id="estimate" class="text-center text-lg font-semibold text-gray-700"></div>
          <button id="sendBtn" type="button" class="w-full inline-flex justify-center items-center px-4 py-3 bg-green-600 text-white rounded hover:bg-green-700 hidden" onclick="sendQuote()">Send Quote Request (Email)</button>
          <div id="status" class="text-center text-sm text-gray-600 mt-2"></div>
        </div>
      </form>
    </div>
  </main>

  <footer class="border-t bg-white">
    <div class="max-w-6xl mx-auto px-6 py-6 flex flex-col md:flex-row justify-between items-center">
      <div class="text-sm text-gray-600">&copy; <span id="year3"></span> EJE Pro Painting & Construction Services – All Rights Reserved</div>
      <div class="mt-3 md:mt-0 text-sm text-gray-600">Contact: info@ejepropaint.com • +1(347) 965-3757</div>
    </div>
  </footer>

  <script>
    // Initialize EmailJS - REPLACE with your user/public key
    // Go to https://www.emailjs.com/ -> create account -> get your user id (public key)
    (function(){
      // REPLACE with your EmailJS user/public key:
      emailjs.init('YOUR_EMAILJS_USER_ID');
    })();

    // Helper: calculate estimate
    function calculateEstimate() {
      const checked = Array.from(document.querySelectorAll('input[name="service"]:checked'));
      const areaInput = document.getElementById('area').value;
      const area = areaInput ? Number(areaInput) : 0;
      const urgency = document.getElementById('urgency').value;
      const estimateEl = document.getElementById('estimate');
      const sendBtn = document.getElementById('sendBtn');
      const status = document.getElementById('status');
      status.textContent = '';

      if (checked.length === 0) {
        alert('Please select at least one service.');
        return;
      }

      // compute total
      let total = 0;
      let list = [];
      checked.forEach(el => {
        const svc = el.value;
        const price = Number(el.dataset.price);
        list.push(svc);
        if (svc === 'plumbing') {
          // plumbing assumed fixed per room
          total += price;
        } else {
          // per-m2 services
          total += price * (area || 0);
        }
      });

      if (list.includes('plumbing') === false && (!area || area <= 0)) {
        estimateEl.textContent = 'Please enter a valid area (m²) for the selected service(s).';
        sendBtn.classList.add('hidden');
        return;
      }

      if (urgency === 'urgent') total = total * 1.2;

      // round to 2 decimals
      total = Math.round((total + Number.EPSILON) * 100) / 100;

      estimateEl.textContent = `Estimated Price: $${total.toFixed(2)} (USD)`;
      // store computed values on window for sending
      window.__quoteData = {
        services: list.join(', '),
        area: area,
        urgency: urgency,
        total: total.toFixed(2)
      };

      sendBtn.classList.remove('hidden');
    }

    // send email via EmailJS
    function sendQuote() {
      const q = window.__quoteData;
      if (!q) {
        alert('Please calculate the estimate first.');
        return;
      }

      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();
      const phone = document.getElementById('phone').value.trim();
      const notes = document.getElementById('notes').value.trim();

      if (!name || !email) {
        alert('Please provide your name and email.');
        return;
      }

      const status = document.getElementById('status');
      status.textContent = 'Sending...';

      // Build template parameters - match keys expected by your EmailJS template
      const templateParams = {
        customer_name: name,
        customer_email: email,
        customer_phone: phone,
        services: q.services,
        area: q.area,
        urgency: q.urgency,
        estimated_total: `$${q.total}`,
        notes: notes
      };

      // IMPORTANT: Replace the serviceID and templateID with your EmailJS values
      const serviceID = 'YOUR_EMAILJS_SERVICE_ID';
      const templateID = 'YOUR_EMAILJS_TEMPLATE_ID';

      emailjs.send(serviceID, templateID, templateParams)
        .then(function(response) {
          status.textContent = 'Quote request sent — we will contact you shortly.';
          document.getElementById('sendBtn').classList.add('hidden');
          // Optionally clear form
        }, function(error) {
          console.error('EmailJS error:', error);
          status.textContent = 'There was an error sending your request. Please try again or contact us directly.';
        });
    }
  </script>

  <script>document.getElementById('year3').innerText = new Date().getFullYear();</script>
</body>
</html>
